export interface DailyContent {
  ayah: {
    text: string;
    surah: string;
    verseNumber: number;
    title: string;
    story: string;
    source: string;
    sourceUrl: string;
  };
  hadith: {
    text: string;
    narrator: string;
    title: string;
    story: string; // The context/story behind the hadith
    source: string;
    sourceUrl: string;
  };
  prophetStory: {
    title: string;
    prophet: string;
    story: string;
    quranReference?: string; // Verse text
    quranCitation?: string; // Surah name and verse number for the reference
    source: string;
    sourceUrl: string;
  };
}

export const DAILY_CONTENT: DailyContent[] = [
  {
    ayah: {
      text: "يَا أَيُّهَا الَّذِينَ آمَنُوا اتَّقُوا اللَّهَ وَكُونُوا مَعَ الصَّادِقِينَ",
      surah: "التوبة",
      verseNumber: 119,
      title: "قصة توبة كعب بن مالك",
      story: `نزلت هذه الآية العظيمة في سياق قصة مؤثرة للصحابي الجليل كعب بن مالك رضي الله عنه، وصاحبيه الذين تخلفوا عن غزوة تبوك. كانت هذه الغزوة في وقت حر شديد وحين طابت الثمار، فتثاقل كعب ولم يجهز نفسه حتى خرج الجيش.

عندما عاد النبي ﷺ، جاء المخلفون يعتذرون ويحلفون، وكانوا بضعاً وثمانين رجلاً، فقبل النبي علانيتهم ووكل سرائرهم إلى الله. أما كعب، فقد اختار الصدق، وقال: "يا رسول الله، والله لو جلست عند غيرك من أهل الدنيا لرأيت أني سأخرج من سخطه بعذر... ولكن والله ما كان لي من عذر".

فأمر النبي ﷺ الصحابة بمقاطعة كعب وصاحبيه، فاجتنبهم الناس خمسين ليلة، حتى ضاقت عليهم الأرض بما رحبت وضاقت عليهم أنفسهم. وفي تمام الليلة الخمسين، نزل الفرج من فوق سبع سماوات بتوبتهم.

الدرس العظيم هنا هو أن الصدق، وإن كان صعباً في بدايته، إلا أن عاقبته حميدة ومنجاة في الدنيا والآخرة. وقد خلد الله قصتهم في القرآن لتكون نبراساً للمؤمنين في أهمية الصدق والاعتراف بالخطأ كأول خطوات التصحيح، وأن الله يقبل التوبة عن عباده الصادقين.`,
      source: "موقع الشيخ ابن باز - توبة كعب بن مالك",
      sourceUrl: "https://binbaz.org.sa/audios/234/51-من-حديث-كعب-بن-مالك-في-قصة-توبته"
    },
    hadith: {
      text: "أَعْطُوا الأَجِيرَ أَجْرَهُ قَبْلَ أَنْ يَجِفَّ عَرَقُهُ",
      narrator: "عبد الله بن عمر",
      title: "قصة الثلاثة أصحاب الغار",
      story: `يرتبط هذا المعنى بقصة عجيبة رواها النبي ﷺ عن ثلاثة نفر ممن كان قبلنا، آواهم المبيت إلى غار، فانحدرت صخرة من الجبل فسدت عليهم الغار. أيقنوا بالهلاك، فقالوا: "إنه لا ينجيكم من هذه الصخرة إلا أن تدعوا الله بصالح أعمالكم".

فدعا كل واحد منهم بأرجى عمل له عند الله. أما الشاهد في حديثنا، فقد كان ثالثهم، الذي قال: "اللهم إنه كان لي أجير عمل لي عملاً، فلما فرغ طلب أجره، فرغبت عنه (أي تأخرت قليلاً أو ما شابه)، فتركه وذهب. فثمرت أجره حتى كثرت منه الأموال".

وبعد سنين، عاد الأجير يطلب حقه القديم. فقال له الرجل: "كل ما ترى من الإبل والبقر والغنم والرقيق هو أجرك". فاستغرب الأجير وقال: "يا عبد الله لا تستهزئ بي!"، فأكد له أنه حقه، فأخذه كله ولم يترك شيئاً.

فقال الرجل: "اللهم إن كنت فعلت ذلك ابتغاء وجهك فافرج عنا ما نحن فيه"، فانفرجت الصخرة وخرجوا يمشون.

هذه القصة تعلمنا عظم الأمانة، وأن حفظ حقوق الناس وتنميتها وردها إليهم كاملة، حتى بعد مرور الزمن، هو من أعظم القربات التي تنجي العبد من كربات الدنيا والآخرة.`,
      source: "موقع الشيخ ابن باز - شرح حديث الثلاثة أهل الغار",
      sourceUrl: "https://binbaz.org.sa/audios/2453/76-من-حديث-انطلق-ثلاثة-رهط-ممن-كان-قبلكم"
    },
    prophetStory: {
      title: "حلم يوسف وتحققه",
      prophet: "يوسف",
      story: `تبدأ قصة يوسف عليه السلام برؤيا، وتنتهي بتأويلها، وبين البداية والنهاية رحلة طويلة من الابتلاءات التي تصهر المعادن. رأى يوسف وهو صغير أحد عشر كوكباً والشمس والقمر له ساجدين، فكانت بشارة بنبوة وملك.

لكن الطريق لم يكن مفروشاً بالورود؛ فقد بدأ بمحنة حسد إخوته وإلقائه في غيابات الجب وحيداً، ثم بيعه بثمن بخس، ثم محنة فتنة امرأة العزيز التي راودته عن نفسه فاستعصم واختار السجن على المعصية، فلبث فيه بضع سنين مظلوماً.

في كل هذه المحطات، لم يفقد يوسف ثقته بالله، ولم يتخلى عن إحسانه، حتى وهو في السجن كان يدعو إلى الله ويعبر الرؤى. شاءت إرادة الله أن يخرج من السجن عزيزاً على مصر، ومككيناً في الأرض، ليجمع الله شمله بأهله ويتحقق حلمه القديم.

تعلمنا القصة أن تدبير الله دقيق ولطيف، وأنه "غالب على أمره ولكن أكثر الناس لا يعلمون". تعلمنا أن المحنة قد تكون باطنها منحة، وأن الصبر والتقوى هما مفتاح التمكين والنصر.`,
      quranReference: "وَرَفَعَ أَبَوَيْهِ عَلَى الْعَرْشِ وَخَرُّوا لَهُ سُجَّدًا ۖ وَقَالَ يَا أَبَتِ هَٰذَا تَأْوِيلُ رُؤْيَايَ مِن قَبْلُ قَدْ جَعَلَهَا رَبِّي حَقًّا",
      quranCitation: "سورة يوسف: 100",
      source: "الرئاسة العامة للبحوث العلمية والإفتاء",
      sourceUrl: "https://www.alifta.gov.sa/Ar/IftaContents/IbnBaz/Pages/FatawaDetails.aspx?ID=353"
    }
  },
  {
    ayah: {
      text: "وَيُؤْثِرُونَ عَلَىٰ أَنفُسِهِمْ وَلَوْ كَانَ بِهِمْ خَصَاصَةٌ",
      surah: "الحشر",
      verseNumber: 9,
      title: "قصة ضيف الأنصاري",
      story: `نزلت هذه الآية الكريمة تخليداً لموقف بطولي في الكرم والإيثار لرجل من الأنصار وزوجته. جاء رجل جائع إلى النبي ﷺ، فلم يجد النبي في بيوته شيئاً يطعمه، فقال: "من يضيف هذا الليلة رحمه الله؟".

فقام رجل من الأنصار وقال: "أنا يا رسول الله". انطلق الرجل إلى بيته، وسأل زوجته: "هل عندك شيء؟"، قالت: "لا إلا قوت صبياني". هنا ظهر معدن الإيمان الحقيقي، حيث اتفقا على خطة عجيبة لإكرام ضيف رسول الله.

قالت المرأة: "علليهم بشيء ونوميهم، فإذا دخل الضيف فأطفئي السراج وأريه أنا نأكل". فجلسوا في الظلام، وجعل الضيف يأكل، وهما يحركان أفواههما كأنهما يأكلان معه، وباتا تلك الليلة جائعين هما وأطفالهما، من أجل إشباع ضيفهما.

فلما أصبح الرجل وغدا إلى النبي ﷺ، استقبله النبي بوجه متهلل وقال: "لقد عجب الله من صنيعكما بضيفكما الليلة".

هذه القصة تعلمنا أن الإيثار ليس مجرد كرم بالزائد، بل هو تقديم حاجة أخيك على حاجة نفسك الضرورية، وهي ذروة سنام الأخوة الإيمانية التي امتدحها الله في كتابه.`,
      source: "موقع الشيخ ابن باز - فضل الإيثار",
      sourceUrl: "https://binbaz.org.sa/fatwas/16768/معنى-الايثار-وصوره"
    },
    hadith: {
      text: "وَاللَّهِ لاَ يُؤْمِنُ، وَاللَّهِ لاَ يُؤْمِنُ، وَاللَّهِ لاَ يُؤْمِنُ... الَّذِي لاَ يَأْمَنُ جَارُهُ بَوَائِقَهُ",
      narrator: "أبو هريرة",
      title: "أهمية حق الجار",
      story: `في مشهد مهيب، يقف النبي ﷺ ويقسم بالله العظيم ثلاث مرات، مما جعل الصحابة يشرئبون بأعناقهم ليعرفوا من هذا الخاسر الذي نفى النبي عنه الإيمان. فقالوا: "خاب وخسر يا رسول الله! من هو؟". قال: "الذي لا يأمن جاره بوائقه".

والبوائق هي الشرور، والغوائل، والخيانات. هذا الحديث الشريف يضع قاعدة اجتماعية صارمة في الإسلام: الأمان هو أساس الجيرة.

والسبب في هذا التشديد العظيم هو طبيعة العلاقة بين الجيران؛ فالجار مطلع على عورات جاره، قريب من داره، عالم بمدخله ومخرجه. فإذا لم يكن الجار أميناً، تحولت حياة جاره إلى جحيم وقلق دائم.

ليس المطلوب فقط كف الأذى، بل إن شعور الجار بالأمان منك هو المقياس. فإذا كان جارك يعيش قلقاً من لسانك، أو يدك، أو نظرك، فقد نقص إيمانك بنص الحديث. الإسلام يريد مجتمعاً مترابطاً، واللبنة الأولى لهذا الترابط هي الثقة والأمان بين البيوت المتجاورة.`,
      source: "موقع الشيخ ابن باز - حق الجار",
      sourceUrl: "https://binbaz.org.sa/audios/2345/304-من-حديث-والله-لا-يومن-من-لا-يامن-جاره-بوائقه"
    },
    prophetStory: {
      title: "موسى والخضر",
      prophet: "موسى",
      story: `قصة رحلة موسى عليه السلام في طلب العلم من الخضر هي مدرسة في التواضع والأدب مع الله. قام موسى خطيباً في بني إسرائيل، فسُئل: "أي الناس أعلم؟"، فقال: "أنا"، فعاتبه الله إذ لم يرد العلم إليه، وأوحى إليه أن عبداً من عبادنا عند مجمع البحرين هو أعلم منك.

لم يتكبر موسى، وهو كليم الله وأحد أولي العزم من الرسل، بل شد الرحال في سفر شاق وطويل ليتعلم. وعندما لقي الخضر، طلب منه الصحبة بأدب التلميذ: "هل أتبعك على أن تعلمن مما علمت رشداً؟".

شهدت الرحلة أحداثاً عجيبة ظاهرها المنكر وباطنها الرحمة والحكمة: خرق السفينة لإنقاذها من غصب الملك، وقتل الغلام لإنقاذ والديه من الطغيان، وبناء الجدار لحفظ كنز اليتيمين.

تعلمنا القصة أن علم البشر مهما اتسع فهو قطرة في بحر علم الله، وأن أقدار الله التي قد نراها مؤلمة أو غير مفهومة، تحمل في طياتها حكماً بالغة ولطفاً خفياً، وأن التسليم لأمر الله وحكمته هو جوهر العبودية.`,
      quranReference: "قَالَ لَهُ مُوسَىٰ هَلْ أَتَّبِعُكَ عَلَىٰ أَن تُعَلِّمَنِ مِمَّا عُلِّمْتَ رُشْدًا",
      quranCitation: "سورة الكهف: 66",
      source: "الرئاسة العامة للبحوث العلمية والإفتاء",
      sourceUrl: "https://www.alifta.gov.sa"
    }
  }
];

export function getDailyContent(): DailyContent {
  // Deterministic rotation based on day of year
  const startOfYear = new Date(new Date().getFullYear(), 0, 0);
  const diff = new Date().getTime() - startOfYear.getTime();
  const oneDay = 1000 * 60 * 60 * 24;
  const dayOfYear = Math.floor(diff / oneDay);
  
  return DAILY_CONTENT[dayOfYear % DAILY_CONTENT.length];
}
