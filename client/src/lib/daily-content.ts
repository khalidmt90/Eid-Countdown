export interface DailyContent {
  ayah: {
    text: string;
    surah: string;
    verseNumber: number;
    title: string;
    story: string;
    source: string;
    sourceUrl: string;
  };
  hadith: {
    text: string;
    narrator: string;
    title: string;
    story: string; // The context/story behind the hadith
    source: string;
    sourceUrl: string;
  };
  prophetStory: {
    title: string;
    prophet: string;
    story: string;
    quranReference?: string; // Verse mentioning the story
    source: string;
    sourceUrl: string;
  };
}

export const DAILY_CONTENT: DailyContent[] = [
  {
    ayah: {
      text: "يَا أَيُّهَا الَّذِينَ آمَنُوا اتَّقُوا اللَّهَ وَكُونُوا مَعَ الصَّادِقِينَ",
      surah: "التوبة",
      verseNumber: 119,
      title: "قصة توبة كعب بن مالك",
      story: "نزلت هذه الآية في قصة كعب بن مالك وصاحبيه الذين تخلفوا عن غزوة تبوك. لم يختلق كعب الأعذار كالمنافقين، بل صدق رسول الله ﷺ وأقر بخطئه. أمر النبي ﷺ الصحابة بمقاطعتهم خمسين ليلة، حتى ضاقت عليهم الأرض بما رحبت. لكن بفضل صدقهم، تاب الله عليهم وأنزل فيهم قرآناً يتلى، مبيناً أن الصدق منجاة وأن الله مع الصادقين في الدنيا والآخرة. القصة تعلمنا أن الصراحة والاعتراف بالذنب أول خطوات التصحيح.",
      source: "موقع الشيخ ابن باز - توبة كعب بن مالك",
      sourceUrl: "https://binbaz.org.sa/audios/234/51-من-حديث-كعب-بن-مالك-في-قصة-توبته"
    },
    hadith: {
      text: "أَعْطُوا الأَجِيرَ أَجْرَهُ قَبْلَ أَنْ يَجِفَّ عَرَقُهُ",
      narrator: "عبد الله بن عمر",
      title: "قصة الثلاثة أصحاب الغار",
      story: "يرتبط هذا المعنى بقصة الثلاثة الذين أواهم المبيت إلى غار فانطبقت عليهم صخرة. توسل أحدهم إلى الله بأمانته، حيث كان له أجير ترك أجره وذهب، فنمى له الرجل ماله حتى أصبح وادياً من الإبل والبقر. لما عاد الأجير بعد سنين، سلمه ماله كله ولم يبخسه شيئاً. فانفرجت الصخرة. هذا الحديث وقصته يعلماننا عظم أداء الحقوق لأصحابها وفضل الأمانة.",
      source: "موقع الشيخ ابن باز - شرح حديث الثلاثة أهل الغار",
      sourceUrl: "https://binbaz.org.sa/audios/2453/76-من-حديث-انطلق-ثلاثة-رهط-ممن-كان-قبلكم"
    },
    prophetStory: {
      title: "حلم يوسف وتحققه",
      prophet: "يوسف",
      story: "بدأت قصة يوسف عليه السلام برؤيا قصها على أبيه، وانتهت بتحققها بعد سنين من الابتلاءات: من كيد إخوته، وإلقائه في الجب، وفتنة امرأة العزيز، والسجن. في كل هذه المحطات، كان يوسف مثالاً للعفة والصبر والإحسان. رفعه الله بالعلم وتأويل الأحاديث حتى مكن له في الأرض. تعلمنا قصته أن تدبير الله خفي ولطيف، وأن المحنة قد تحمل في طياتها منحة عظيمة.",
      quranReference: "وَرَفَعَ أَبَوَيْهِ عَلَى الْعَرْشِ وَخَرُّوا لَهُ سُجَّدًا ۖ وَقَالَ يَا أَبَتِ هَٰذَا تَأْوِيلُ رُؤْيَايَ مِن قَبْلُ قَدْ جَعَلَهَا رَبِّي حَقًّا",
      source: "الرئاسة العامة للبحوث العلمية والإفتاء",
      sourceUrl: "https://www.alifta.gov.sa/Ar/IftaContents/IbnBaz/Pages/FatawaDetails.aspx?ID=353"
    }
  },
  {
    ayah: {
      text: "وَيُؤْثِرُونَ عَلَىٰ أَنفُسِهِمْ وَلَوْ كَانَ بِهِمْ خَصَاصَةٌ",
      surah: "الحشر",
      verseNumber: 9,
      title: "قصة ضيف الأنصاري",
      story: "نزلت في رجل من الأنصار استضاف ضيفاً لرسول الله ﷺ ولم يكن عنده إلا قوت صبيانه. فأمر زوجته بتنويم الصبيان وإطفاء السراج، وأوهم الضيف أنه يأكل معه وهو لا يأكل، ليُشبع ضيفه. فلما أصبح، قال له النبي ﷺ: 'لقد عجب الله من صنيعكما بضيفكما الليلة'. تعلمنا الآية والقصة أن الإيثار هو تقديم حاجة أخيك على حاجتك، وهي أعلى درجات الكرم والجود.",
      source: "موقع الشيخ ابن باز - فضل الإيثار",
      sourceUrl: "https://binbaz.org.sa/fatwas/16768/معنى-الايثار-وصوره"
    },
    hadith: {
      text: "وَاللَّهِ لاَ يُؤْمِنُ، وَاللَّهِ لاَ يُؤْمِنُ، وَاللَّهِ لاَ يُؤْمِنُ... الَّذِي لاَ يَأْمَنُ جَارُهُ بَوَائِقَهُ",
      narrator: "أبو هريرة",
      title: "أهمية حق الجار",
      story: "أقسم النبي ﷺ ثلاث مرات لينبه الصحابة لخطورة الأمر. سياق الحديث يؤكد أن أذى الجار ينفي كمال الإيمان. البوائق هي الشرور والغوائل. الإسلام نظم العلاقة بين الجيران بدقة، وجعل كف الأذى أدنى درجات الحقوق، والإحسان أعلاها. القصة وراء التشديد هي أن الجار مطلع على عورات جاره، فالأمان منه ركيزة لاستقرار المجتمع.",
      source: "موقع الشيخ ابن باز - حق الجار",
      sourceUrl: "https://binbaz.org.sa/audios/2345/304-من-حديث-والله-لا-يومن-من-لا-يامن-جاره-بوائقه"
    },
    prophetStory: {
      title: "موسى والخضر",
      prophet: "موسى",
      story: "قصة رحلة موسى عليه السلام لطلب العلم من الخضر. رغم أن موسى كليم الله ورسوله، إلا أنه تواضع ورحل ليتعلم ممن هو أعلم منه في باب معين. المواقف الثلاثة (خرق السفينة، قتل الغلام، بناء الجدار) كانت ظاهرها شراً أو عبثاً، وباطنها رحمة وحكمة. تعلمنا القصة أن علم البشر قاصر، وأن أقدار الله مبنية على حكم بالغة قد لا ندركها فوراً.",
      quranReference: "قَالَ لَهُ مُوسَىٰ هَلْ أَتَّبِعُكَ عَلَىٰ أَن تُعَلِّمَنِ مِمَّا عُلِّمْتَ رُشْدًا",
      source: "الرئاسة العامة للبحوث العلمية والإفتاء",
      sourceUrl: "https://www.alifta.gov.sa"
    }
  }
];

export function getDailyContent(): DailyContent {
  // Deterministic rotation based on day of year
  const startOfYear = new Date(new Date().getFullYear(), 0, 0);
  const diff = new Date().getTime() - startOfYear.getTime();
  const oneDay = 1000 * 60 * 60 * 24;
  const dayOfYear = Math.floor(diff / oneDay);
  
  return DAILY_CONTENT[dayOfYear % DAILY_CONTENT.length];
}
